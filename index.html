<!DOCTYPE html>
<html lang="ru">

<head>
  <meta charset="utf-8">
  <title>Моя первая программа</title>
  <link rel="stylesheet" href="css/styles.css">
</head>



<body>
  <table id="table"></table>
  <input id="name" type="text" placeholder="Введите имя"><br>
  <input id="age" type="text" placeholder="Введите возраст"><br>
  <input id="salary" type="text" placeholder="Введите зарплату"><br>
  <button>Добавить</button>


  <script>
    "use strict";
    let employees = [
      { name: 'employee1', age: 30, salary: 400 },
      { name: 'employee2', age: 31, salary: 500 },
      { name: 'employee3', age: 32, salary: 600 },
    ];
    let table = document.querySelector('#table')

    for (const employee of employees) {
      let tr = document.createElement('tr')

      let td1 = document.createElement('td')
      td1.innerHTML = employee.name
      tr.appendChild(td1)

      let td2 = document.createElement('td')
      td2.innerHTML = employee.age
      tr.appendChild(td2)

      let td3 = document.createElement('td')
      td3.innerHTML = employee.salary
      tr.appendChild(td3)

      table.appendChild(tr)
    }

    let tds = document.querySelectorAll('td')

    for (const td of tds) {
      addEdit(td)
    }


    let trs = table.querySelectorAll('tr')
    for (const tr of trs) {
      addRemoveTr(tr)
    }

    let name = document.querySelector('#name')
    let age = document.querySelector('#age')
    let salary = document.querySelector('#salary')
    let button = document.querySelector('button')

    button.addEventListener('click', function () {
      let tr = document.createElement('tr')

      let td1 = document.createElement('td')
      td1.innerHTML = name.value
      name.value = ''
      tr.appendChild(td1)

      let td2 = document.createElement('td')
      td2.innerHTML = age.value
      age.value = ''
      tr.appendChild(td2)

      let td3 = document.createElement('td')
      td3.innerHTML = salary.value
      salary.value = ''
      tr.appendChild(td3)

      let tds = tr.querySelectorAll('td')
      for (const td of tds) {
        addEdit(td)
      }

      addRemoveTr(tr)
      table.appendChild(tr)
    })

    function addEdit(td) {

      td.addEventListener('click', function func() {
        let input = document.createElement('input')
        if (!this.innerHTML) {
          input.value = this.innerHTML
          this.innerHTML = ''
        }
        input.addEventListener('blur', function () {
          td.innerHTML = input.value
          td.addEventListener('click', func)
        })
        this.appendChild(input)
        input.classList.add('sized')
        input.focus()
        this.removeEventListener('click', func)
      })

    }

    function addRemoveTr(tr) {
      let td = document.createElement('td')
      let remove = document.createElement('a')
      remove.href = ''
      remove.innerHTML = 'удалить'
      remove.addEventListener('click', function (even) {
        table.removeChild(tr)
        even.preventDefault()
      })
      td.appendChild(remove)
      tr.appendChild(td)
    }

    function getRandomInt(min, max) {
      return Math.floor(Math.random() * (max - min + 1)) + min;
    }
  </script>
</body>

</html>